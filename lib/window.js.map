{"version":3,"sources":["../src/window.js"],"names":[],"mappings":";;;;;;;AAAA;;;;AACA;;;;AACA;;;;AACA;;;;AAEA;;;;AAKO,IAAI,4BAAU,YAAW;AAC9B,SAAO,qBAAU;AACf,OAAG,QAAQ,OAAR,CAAgB,CAAhB,EADY;AAEf,OAAG,QAAQ,OAAR,CAAgB,CAAhB,EAFY;AAGf,WAAO,QAAQ,OAAR,CAAgB,KAAhB,EAHQ;AAIf,YAAQ,QAAQ,OAAR,CAAgB,MAAhB,EAJO;;AAMf,cAAU,qBAAU;AAClB,SAAG,QAAQ,OAAR,CAAgB,QAAhB,CAAyB,CAAzB,EADe;AAElB,SAAG,QAAQ,OAAR,CAAgB,QAAhB,CAAyB,CAAzB;AAFe,KAAV;AANK,GAAV,CAAP;AAWD,CAZM;;AAcP;AACO,IAAI,4BAAU;AACnB,KAAG,yBAAc,YAAW;AAC1B,WAAO,OAAO,OAAP,GAAiB,iBAAO,YAAP,EAAxB;AACD,GAFE,CADgB;;AAKnB,KAAG,yBAAc,YAAW;AAC1B,WAAO,OAAO,OAAP,GAAiB,iBAAO,YAAP,EAAxB;AACD,GAFE,CALgB;;AASnB,SAAO,yBAAc,YAAW;AAC9B,WAAO,OAAO,UAAP,GAAoB,iBAAO,YAAP,EAA3B;AACD,GAFM,CATY;;AAanB,UAAQ,yBAAc,YAAW;AAC/B,WAAO,OAAO,WAAP,GAAqB,iBAAO,YAAP,EAA5B;AACD,GAFO,CAbW;;AAiBnB,YAAU;AACR,OAAG,YAAW;AACZ,aAAO,cAAI,MAAJ,CAAW,QAAX,CAAoB,CAApB,GAAwB,iBAAO,YAAP,EAA/B;AACD,KAHO;;AAKR,OAAG,YAAW;AACZ,aAAO,cAAI,MAAJ,CAAW,QAAX,CAAoB,CAApB,GAAwB,iBAAO,YAAP,EAA/B;AACD;AAPO,GAjBS;;AA2BnB,cAAY,YAAW;AACrB;AACA;AACA;AACA,QAAI,YACD,QAAQ,OAAR,CAAgB,KAAhB,KAA0B,iBAAO,CAAP,EAA3B,GACA,iBAAO,KAAP,EAFF;;AAIA,QAAI,YAAY,EAAhB,EAAoB;AAClB;AACA,aAAO,CAAP;AACD;;AAED;AACA,WAAO,iBAAE,GAAF,CAAM,CAAC,CAAD,EAAI,iBAAE,KAAF,CAAQ,YAAY,CAApB,CAAJ,CAAN,CAAP;AACD,GA1CkB;;AA4CnB,UAAQ,QAAQ;AA5CG,CAAd;;kBA+CQ,O","file":"window.js","sourcesContent":["import _ from 'lodash';\nimport cfg from './cfg';\nimport client from './client';\nimport screen from './screen';\n\nimport {\n  maybeThrottle,\n  roundRect\n} from './util';\n\nexport let _toJSON = function() {\n  return roundRect({\n    x: exports.window2.x(),\n    y: exports.window2.y(),\n    width: exports.window2.width(),\n    height: exports.window2.height(),\n\n    viewport: roundRect({\n      x: exports.window2.viewport.x(),\n      y: exports.window2.viewport.y()\n    })\n  });\n};\n\n// window relative to current screen | in device px\nexport let window2 = {\n  x: maybeThrottle(function() {\n    return window.screenX * screen.osZoomFactor();\n  }),\n\n  y: maybeThrottle(function() {\n    return window.screenY * screen.osZoomFactor();\n  }),\n\n  width: maybeThrottle(function() {\n    return window.outerWidth * screen.osZoomFactor();\n  }),\n\n  height: maybeThrottle(function() {\n    return window.outerHeight * screen.osZoomFactor();\n  }),\n\n  viewport: {\n    x: function() {\n      return cfg.window.viewport.x * screen.osZoomFactor();\n    },\n\n    y: function() {\n      return cfg.window.viewport.y * screen.osZoomFactor();\n    }\n  },\n\n  borderSize: function() {\n    // assume the window bottom border is the same as the horizontal ones\n    // see Window 7 window borders, or Windows 10 shadow borders\n    // OSX, etc may have none\n    let widthDiff =\n      (exports.window2.width() - client.x()) -\n      client.width();\n\n    if (widthDiff > 25) {\n      // assume Developer Tools is open vertically, and widthDiff cannot be trusted\n      return 0;\n    }\n\n    // assume border on both left and right\n    return _.max([0, _.floor(widthDiff / 2)]);\n  },\n\n  toJSON: exports._toJSON\n};\n\nexport default window2;\n"]}