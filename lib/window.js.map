{"version":3,"sources":["../src/window.js"],"names":[],"mappings":"uIAAA;AACA;AACA;AACA;;AAEA,8B;;;;;AAKO,IAAI,MAAM,GAAG,YAAW;AAC7B,SAAO,qBAAU;AACf,IAAA,GAAG,EAAE,gBAAQ,GADE;;AAGf,IAAA,CAAC,EAAE,gBAAQ,CAAR,EAHY;AAIf,IAAA,CAAC,EAAE,gBAAQ,CAAR,EAJY;AAKf,IAAA,KAAK,EAAE,gBAAQ,KAAR,EALQ;AAMf,IAAA,MAAM,EAAE,gBAAQ,MAAR,EANO;;AAQf,IAAA,QAAQ,EAAE,qBAAU;AAClB,MAAA,CAAC,EAAE,gBAAQ,QAAR,CAAiB,CAAjB,EADe;AAElB,MAAA,CAAC,EAAE,gBAAQ,QAAR,CAAiB,CAAjB,EAFe,EAAV,CARK,EAAV,CAAP;;;AAaD,CAdM;;AAgBP;AACA;wBACO,IAAI,OAAO,GAAG;AACnB,EAAA,GAAG,EAAE,aAAI,MADU;;AAGnB,EAAA,CAAC,EAAE,0BAAe,YAAW;AAC3B,WAAO,MAAM,CAAC,OAAP,GAAiB,gBAAO,YAAP,EAAxB;AACD,GAFE,CAHgB;;AAOnB,EAAA,CAAC,EAAE,0BAAe,YAAW;AAC3B,WAAO,MAAM,CAAC,OAAP,GAAiB,gBAAO,YAAP,EAAxB;AACD,GAFE,CAPgB;;AAWnB,EAAA,KAAK,EAAE,0BAAe,YAAW;AAC/B,WAAO,MAAM,CAAC,UAAP,GAAoB,gBAAO,YAAP,EAA3B;AACD,GAFM,CAXY;;AAenB,EAAA,MAAM,EAAE,0BAAe,YAAW;AAChC,WAAO,MAAM,CAAC,WAAP,GAAqB,gBAAO,YAAP,EAA5B;AACD,GAFO,CAfW;;AAmBnB,EAAA,QAAQ,EAAE;AACR,IAAA,CAAC,EAAE,YAAW;AACZ,aAAO,yBAAE,SAAF,CAAY,aAAI,MAAJ,CAAW,QAAX,CAAoB,CAAhC,EAAmC,CAAnC,IAAwC,gBAAO,YAAP,EAA/C;AACD,KAHO;;AAKR,IAAA,CAAC,EAAE,YAAW;AACZ,aAAO,yBAAE,SAAF,CAAY,aAAI,MAAJ,CAAW,QAAX,CAAoB,CAAhC,EAAmC,CAAnC,IAAwC,gBAAO,YAAP,EAA/C;AACD,KAPO,EAnBS;;;AA6BnB,EAAA,UAAU,EAAE,YAAW;AACrB,QAAI,yBAAE,SAAF,CAAY,aAAI,MAAJ,CAAW,UAAvB,CAAJ,EAAwC;AACtC,aAAO,aAAI,MAAJ,CAAW,UAAlB;AACD;;AAED;AACA;AACA;AACA,QAAI,SAAS;AACV,IAAA,OAAO,CAAC,KAAR,KAAkB,gBAAO,CAAP,EAAnB;AACA,oBAAO,KAAP,EAFF;;AAIA,QAAI,SAAS,GAAG,EAAhB,EAAoB;AAClB;AACA,aAAO,CAAP;AACD;;AAED;AACA,WAAO,yBAAE,GAAF,CAAM;AACX,KADW;AAEX,6BAAE,KAAF,CAAQ,SAAS,GAAG,CAApB,CAFW,CAAN,CAAP;;AAID,GAnDkB;;AAqDnB,EAAA,MAAM,gBArDa,EAAd,C","file":"window.js","sourcesContent":["import _ from 'lodash-firecloud';\nimport cfg from './cfg';\nimport client from './client';\nimport screen from './screen';\n\nimport {\n  roundRect,\n  shouldThrottle\n} from './util';\n\nexport let toJSON = function() {\n  return roundRect({\n    cfg: window2.cfg,\n\n    x: window2.x(),\n    y: window2.y(),\n    width: window2.width(),\n    height: window2.height(),\n\n    viewport: roundRect({\n      x: window2.viewport.x(),\n      y: window2.viewport.y()\n    })\n  });\n};\n\n// window\n// coordinates in device px relative to current screen\nexport let window2 = {\n  cfg: cfg.window,\n\n  x: shouldThrottle(function() {\n    return window.screenX * screen.osZoomFactor();\n  }),\n\n  y: shouldThrottle(function() {\n    return window.screenY * screen.osZoomFactor();\n  }),\n\n  width: shouldThrottle(function() {\n    return window.outerWidth * screen.osZoomFactor();\n  }),\n\n  height: shouldThrottle(function() {\n    return window.outerHeight * screen.osZoomFactor();\n  }),\n\n  viewport: {\n    x: function() {\n      return _.defaultTo(cfg.window.viewport.x, 0) * screen.osZoomFactor();\n    },\n\n    y: function() {\n      return _.defaultTo(cfg.window.viewport.y, 0) * screen.osZoomFactor();\n    }\n  },\n\n  borderSize: function() {\n    if (_.isDefined(cfg.window.borderSize)) {\n      return cfg.window.borderSize;\n    }\n\n    // assume the window bottom border is the same as the horizontal ones\n    // see Window 7 window borders, or Windows 10 shadow borders\n    // OSX, etc may have none\n    let widthDiff =\n      (window2.width() - client.x()) -\n      client.width();\n\n    if (widthDiff > 25) {\n      // assume Developer Tools is open vertically, and widthDiff cannot be trusted\n      return 0;\n    }\n\n    // assume border on both left and right\n    return _.max([\n      0,\n      _.floor(widthDiff / 2)\n    ]);\n  },\n\n  toJSON\n};\n\nexport default window2;\n"]}