{"version":3,"sources":["../src/screen.js"],"names":[],"mappings":"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","file":"screen.js","sourcesContent":["import _ from 'lodash';\nimport cfg from './cfg';\n\nimport {\n  maybeThrottle,\n  roundRect\n} from './util';\n\nexport let _toJSON = function() {\n  return roundRect({\n    width: exports.screen.width(),\n    height: exports.screen.height(),\n\n    available: roundRect({\n      left: exports.screen.available.left(),\n      top: exports.screen.available.top(),\n      width: exports.screen.available.width(),\n      height: exports.screen.available.height()\n    }),\n\n    orientation: {\n      angle: exports.screen.orientation.angle(),\n      type: exports.screen.orientation.type()\n    },\n\n    osZoomFactorPercentile: _.round(exports.screen.osZoomFactor() * 100),\n    pixelRatioPercentile: _.round(exports.screen.pixelRatio() * 100)\n  });\n};\n\n// current screen | in device px\nexport let screen = {\n  width: maybeThrottle(function() {\n    return window.screen.width * exports.screen.osZoomFactor();\n  }),\n\n  height: maybeThrottle(function() {\n    return window.screen.height * exports.screen.osZoomFactor();\n  }),\n\n  available: {\n    left: maybeThrottle(function() {\n      return window.screen.availLeft * exports.screen.osZoomFactor();\n    }),\n\n    top: maybeThrottle(function() {\n      return window.screen.availTop * exports.screen.osZoomFactor();\n    }),\n\n    width: maybeThrottle(function() {\n      return window.screen.availWidth * exports.screen.osZoomFactor();\n    }),\n\n    height: maybeThrottle(function() {\n      return window.screen.availHeight * exports.screen.osZoomFactor();\n    })\n  },\n\n  orientation: {\n    angle: maybeThrottle(function() {\n      return window.screen.orientation.angle;\n    }),\n\n    type: maybeThrottle(function() {\n      return window.screen.orientation.type;\n    })\n  },\n\n  osZoomFactor: maybeThrottle(function() {\n    if (!_.isUndefined(cfg.screen.osZoomFactor)) {\n      return cfg.screen.osZoomFactor;\n    }\n\n    let osZoomFactor = window.devicePixelRatio /\n      (cfg.page.zoomFactor * exports.screen.pixelRatio());\n    return _.round(osZoomFactor, 2);\n  }),\n\n  pixelRatio: maybeThrottle(function() {\n    if (!_.isUndefined(cfg.screen.pixelRatio)) {\n      return cfg.screen.pixelRatio;\n    }\n\n    if (_.includes(navigator.appVersion, 'Win')) {\n      // Windows always has window.devicePixelRatio = 1 at rest\n      // i.e. when page zoom is 100% and\n      // OS zoom (Display Settings -> Change size...) is also 100%\n      return 1;\n    }\n\n    let pixelRatio = window.devicePixelRatio / cfg.page.zoomFactor;\n    return _.round(pixelRatio, 2);\n  }),\n\n  toJSON: exports._toJSON\n};\n\nexport default screen;\n"]}