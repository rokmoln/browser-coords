{"version":3,"sources":["../src/screen.js"],"names":[],"mappings":"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","file":"screen.js","sourcesContent":["import _ from 'lodash-firecloud';\nimport cfg from './cfg';\n\nimport {\n  roundRect,\n  throttle\n} from './util';\n\nexport let toJSON = function() {\n  return roundRect({\n    width: screen.width(),\n    height: screen.height(),\n\n    available: roundRect({\n      left: screen.available.left(),\n      top: screen.available.top(),\n      width: screen.available.width(),\n      height: screen.available.height()\n    }),\n\n    orientation: {\n      angle: screen.orientation.angle(),\n      type: screen.orientation.type()\n    },\n\n    osZoomFactorPercentile: _.round(screen.osZoomFactor() * 100),\n    pixelRatioPercentile: _.round(screen.pixelRatio() * 100)\n  });\n};\n\n// current screen | in device px\nexport let screen = {\n  width: throttle(function() {\n    return window.screen.width * screen.osZoomFactor();\n  }),\n\n  height: throttle(function() {\n    return window.screen.height * screen.osZoomFactor();\n  }),\n\n  available: {\n    left: throttle(function() {\n      return window.screen.availLeft * screen.osZoomFactor();\n    }),\n\n    top: throttle(function() {\n      return window.screen.availTop * screen.osZoomFactor();\n    }),\n\n    width: throttle(function() {\n      return window.screen.availWidth * screen.osZoomFactor();\n    }),\n\n    height: throttle(function() {\n      return window.screen.availHeight * screen.osZoomFactor();\n    })\n  },\n\n  orientation: {\n    angle: throttle(function() {\n      return window.screen.orientation.angle;\n    }),\n\n    type: throttle(function() {\n      return window.screen.orientation.type;\n    })\n  },\n\n  osZoomFactor: throttle(function() {\n    if (!_.isUndefined(cfg.screen.osZoomFactor)) {\n      return cfg.screen.osZoomFactor;\n    }\n\n    let osZoomFactor = window.devicePixelRatio /\n      (cfg.page.zoomFactor * screen.pixelRatio());\n    return _.round(osZoomFactor, 2);\n  }),\n\n  pixelRatio: throttle(function() {\n    if (!_.isUndefined(cfg.screen.pixelRatio)) {\n      return cfg.screen.pixelRatio;\n    }\n\n    if (_.includes(navigator.appVersion, 'Win')) {\n      // Windows always has window.devicePixelRatio = 1 at rest\n      // i.e. when page zoom is 100% and\n      // OS zoom (Display Settings -> Change size...) is also 100%\n      return 1;\n    }\n\n    let pixelRatio = window.devicePixelRatio / cfg.page.zoomFactor;\n    return _.round(pixelRatio, 2);\n  }),\n\n  toJSON\n};\n\nexport default screen;\n"]}