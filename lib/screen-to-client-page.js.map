{"version":3,"sources":["../src/screen-to-client-page.js"],"names":[],"mappings":";;;AAGA;AACA;AACA;AACA;AACA,0D,8FAPA;AACA;AAQA;AACO,IAAI,kBAAkB,GAAG,UAAS,QAAT,EAAmB;AACjD,MAAI;AACF,IAAA,OADE;AAEF,IAAA,OAFE;AAGA,EAAA,QAHJ;;AAKA,MAAI,cAAc,GAAG,cAAW,UAAX,EAArB;AACA,MAAI,kBAAkB,GAAG,gBAAa,YAAb,EAAzB;AACA,MAAI,kBAAkB,GAAG,cAAc,GAAG,kBAA1C;;AAEA,MAAI,OAAO,GAAG,yBAAE,KAAF,CAAQ;AACpB,EAAA,OAAO;AACP,kBAAa,CAAb,EADA;AAEA,kBAAa,CAAb,EAHoB,IAGA,kBAHR,CAAd;;AAKA,MAAI,OAAO,GAAG,yBAAE,KAAF,CAAQ;AACpB,EAAA,OAAO;AACP,kBAAa,CAAb,EADA;AAEA,kBAAa,CAAb,EAHoB,IAGA,kBAHR,CAAd;;AAKA,MAAI,KAAK,GAAG,OAAO,GAAG,yBAAE,KAAF,CAAQ,gBAAa,MAAb,CAAoB,CAApB,KAA0B,kBAAlC,CAAtB;AACA,MAAI,KAAK,GAAG,OAAO,GAAG,yBAAE,KAAF,CAAQ,gBAAa,MAAb,CAAoB,CAApB,KAA0B,kBAAlC,CAAtB;;AAEA,2BAAE,QAAF,CAAW,QAAX,EAAqB;AACnB,IAAA,OADmB;AAEnB,IAAA,OAFmB;AAGnB,IAAA,KAHmB;AAInB,IAAA,KAJmB,EAArB;;;AAOA,SAAO,QAAP;AACD,CA/BM,C","file":"screen-to-client-page.js","sourcesContent":["// see https://lists.w3.org/Archives/Public/www-style/2016Dec/0052.html\n// see https://github.com/w3c/csswg-drafts/issues/809\n\nimport _ from 'lodash-firecloud';\nimport clientCoords from './client';\nimport pageCoords from './page';\nimport screenCoords from './screen';\nimport windowCoords from './window';\n\n// current screen, not virtual screen\nexport let screenToClientPage = function(screenXY) {\n  let {\n    screenX,\n    screenY\n  } = screenXY;\n\n  let pageZoomFactor = pageCoords.zoomFactor();\n  let screenOsZoomFactor = screenCoords.osZoomFactor();\n  let absoluteZoomFactor = pageZoomFactor * screenOsZoomFactor;\n\n  let clientX = _.round((\n    screenX -\n    windowCoords.x() -\n    clientCoords.x()) / absoluteZoomFactor);\n\n  let clientY = _.round((\n    screenY -\n    windowCoords.y() -\n    clientCoords.y()) / absoluteZoomFactor);\n\n  let pageX = clientX + _.round(clientCoords.scroll.x() / absoluteZoomFactor);\n  let pageY = clientY + _.round(clientCoords.scroll.y() / absoluteZoomFactor);\n\n  _.defaults(screenXY, {\n    clientX,\n    clientY,\n    pageX,\n    pageY\n  });\n\n  return screenXY;\n};\n\nexport default screenToClientPage;\n"]}