{"version":3,"sources":["../src/screen-to-client-page.ts"],"names":[],"mappings":";;;AAGA;AACA;AACA;AACA;AACA,0D,8FAPA;AACA;;;;;;;;;;;;;AAoBA;AACO,IAAI,kBAAkB,GAAG,UAAS,EAAC,OAAD,EAAU,OAAV,EAAT,EAAqD;AACnF,MAAI,cAAc,GAAG,cAAW,UAAX,EAArB;AACA,MAAI,kBAAkB,GAAG,gBAAa,YAAb,EAAzB;AACA,MAAI,kBAAkB,GAAG,cAAc,GAAG,kBAA1C;;AAEA,MAAI,OAAO,GAAG,yBAAE,KAAF,CAAQ;AACpB,EAAA,OAAO;AACP,kBAAa,CAAb,EADA;AAEA,kBAAa,CAAb,EAHoB,IAGA,kBAHR,CAAd;;AAKA,MAAI,OAAO,GAAG,yBAAE,KAAF,CAAQ;AACpB,EAAA,OAAO;AACP,kBAAa,CAAb,EADA;AAEA,kBAAa,CAAb,EAHoB,IAGA,kBAHR,CAAd;;AAKA,SAAO;AACL,IAAA,OADK;AAEL,IAAA,OAFK;AAGL,IAAA,KAAK,EAAE,OAAO,GAAG,gBAAa,MAAb,CAAoB,CAApB,EAHZ;AAIL,IAAA,KAAK,EAAE,OAAO,GAAG,gBAAa,MAAb,CAAoB,CAApB,EAJZ,EAAP;;AAMD,CArBM,C","file":"screen-to-client-page.js","sourcesContent":["// see https://lists.w3.org/Archives/Public/www-style/2016Dec/0052.html\n// see https://github.com/w3c/csswg-drafts/issues/809\n\nimport _ from 'lodash-firecloud';\nimport clientCoords from './client';\nimport pageCoords from './page';\nimport screenCoords from './screen';\nimport windowCoords from './window';\n\ntype ScreenXY = {\n  screenX: number;\n  screenY: number;\n}\n\ntype ClientPageXY = {\n  clientX: number;\n  clientY: number;\n  pageX: number;\n  pageY: number;\n}\n\n// current screen, not virtual screen\nexport let screenToClientPage = function({screenX, screenY}: ScreenXY): ClientPageXY {\n  let pageZoomFactor = pageCoords.zoomFactor();\n  let screenOsZoomFactor = screenCoords.osZoomFactor();\n  let absoluteZoomFactor = pageZoomFactor * screenOsZoomFactor;\n\n  let clientX = _.round((\n    screenX -\n    windowCoords.x() -\n    clientCoords.x()) / absoluteZoomFactor);\n\n  let clientY = _.round((\n    screenY -\n    windowCoords.y() -\n    clientCoords.y()) / absoluteZoomFactor);\n\n  return {\n    clientX,\n    clientY,\n    pageX: clientX + clientCoords.scroll.x(),\n    pageY: clientY + clientCoords.scroll.y()\n  };\n};\n\nexport default screenToClientPage;\n"]}