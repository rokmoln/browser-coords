{"version":3,"sources":["../src/page.js"],"names":[],"mappings":";;;;;;;AAAA;;;;AACA;;;;AACA;;;;AACA;;;;AAEA;;;;AAKO,IAAI,4BAAU,YAAW;AAC9B,SAAO,qBAAU;AACf,OAAG,QAAQ,IAAR,CAAa,CAAb,EADY;AAEf,OAAG,QAAQ,IAAR,CAAa,CAAb,EAFY;AAGf,WAAO,QAAQ,IAAR,CAAa,KAAb,EAHQ;AAIf,YAAQ,QAAQ,IAAR,CAAa,MAAb,EAJO;;AAMf,SAAK,QAAQ,IAAR,CAAa,GAAb,EANU;AAOf,0BAAsB,iBAAE,KAAF,CAAQ,QAAQ,IAAR,CAAa,UAAb,KAA4B,GAApC;AAPP,GAAV,CAAP;AASD,CAVM;;AAYP;AACA;AACO,IAAI,sBAAO;AAChB,KAAG,YAAW;AACZ,WAAO,iBAAO,CAAP,KAAa,iBAAO,MAAP,CAAc,CAAd,EAApB;AACD,GAHe;;AAKhB,KAAG,YAAW;AACZ,WAAO,iBAAO,CAAP,KAAa,iBAAO,MAAP,CAAc,CAAd,EAApB;AACD,GAPe;;AAShB,SAAO,yBAAc,YAAW;AAC9B,WAAO,iBAAE,GAAF,CAAM,CAAE;AACb,aAAS,IAAT,CAAc,WADH,EAEX,SAAS,eAAT,CAAyB,WAFd,EAGX,SAAS,IAAT,CAAc,WAHH,EAIX,SAAS,eAAT,CAAyB,WAJd,EAKX,SAAS,eAAT,CAAyB,WALd,CAAN,IAMF,iBAAO,YAAP,EANL;AAOD,GARM,CATS;;AAmBhB,UAAQ,yBAAc,YAAW;AAC/B,WAAO,iBAAE,GAAF,CAAM,CAAE;AACb,aAAS,IAAT,CAAc,YADH,EAEX,SAAS,eAAT,CAAyB,YAFd,EAGX,SAAS,IAAT,CAAc,YAHH,EAIX,SAAS,eAAT,CAAyB,YAJd,EAKX,SAAS,eAAT,CAAyB,YALd,CAAN,IAMF,iBAAO,YAAP,EANL;AAOD,GARO,CAnBQ;;AA6BhB,OAAK,yBAAc,YAAW;AAC5B,WAAO,OAAO,QAAP,CAAgB,IAAvB;AACD,GAFI,CA7BW;;AAiChB,cAAY,YAAW;AACrB,WAAO,cAAI,IAAJ,CAAS,UAAhB;AACD,GAnCe;;AAqChB,UAAQ,QAAQ;AArCA,CAAX;;kBAwCQ,I","file":"page.js","sourcesContent":["import _ from 'lodash';\nimport cfg from './cfg';\nimport client from './client';\nimport screen from './screen';\n\nimport {\n  maybeThrottle,\n  roundRect\n} from './util';\n\nexport let _toJSON = function() {\n  return roundRect({\n    x: exports.page.x(),\n    y: exports.page.y(),\n    width: exports.page.width(),\n    height: exports.page.height(),\n\n    url: exports.page.url(),\n    zoomFactorPercentile: _.round(exports.page.zoomFactor() * 100)\n  });\n};\n\n// page relative to window (top frame) | in device px\n// aka layout viewport, document\nexport let page = {\n  x: function() {\n    return client.x() - client.scroll.x();\n  },\n\n  y: function() {\n    return client.y() - client.scroll.y();\n  },\n\n  width: maybeThrottle(function() {\n    return _.max([ // same as jQuery(document).width\n      document.body.scrollWidth,\n      document.documentElement.scrollWidth,\n      document.body.offsetWidth,\n      document.documentElement.offsetWidth,\n      document.documentElement.clientWidth\n    ]) * screen.osZoomFactor();\n  }),\n\n  height: maybeThrottle(function() {\n    return _.max([ // same as jQuery(document).height\n      document.body.scrollHeight,\n      document.documentElement.scrollHeight,\n      document.body.offsetHeight,\n      document.documentElement.offsetHeight,\n      document.documentElement.clientHeight\n    ]) * screen.osZoomFactor();\n  }),\n\n  url: maybeThrottle(function() {\n    return window.location.href;\n  }),\n\n  zoomFactor: function() {\n    return cfg.page.zoomFactor;\n  },\n\n  toJSON: exports._toJSON\n};\n\nexport default page;\n"]}