{"version":3,"sources":["../src/page.ts"],"names":[],"mappings":"oIAAA;AACA;AACA;AACA;;AAEA,8B;;;;;AAKA;AACO,IAAI,MAAM,GAAG,YAAW;AAC7B,SAAO,qBAAU;AACf,IAAA,GAAG,EAAE,aAAK,GADK;;AAGf,IAAA,CAAC,EAAE,aAAK,CAAL,EAHY;AAIf,IAAA,CAAC,EAAE,aAAK,CAAL,EAJY;AAKf,IAAA,KAAK,EAAE,aAAK,KAAL,EALQ;AAMf,IAAA,MAAM,EAAE,aAAK,MAAL,EANO;;AAQf,IAAA,GAAG,EAAE,MAAM,CAAC,QAAP,CAAgB,IARN;AASf,IAAA,oBAAoB,EAAE,yBAAE,KAAF,CAAQ,aAAK,UAAL,KAAoB,GAA5B,CATP,EAAV,CAAP;;AAWD,CAZM;;AAcP;AACA;wBACO,IAAI,IAAI,GAAG;AAChB,EAAA,GAAG,EAAE,aAAI,IADO;;AAGhB,EAAA,CAAC,EAAE,YAAW;AACZ,WAAO,IAAI,gBAAO,MAAP,CAAc,CAAd,EAAX;AACD,GALe;;AAOhB,EAAA,CAAC,EAAE,YAAW;AACZ,WAAO,IAAI,gBAAO,MAAP,CAAc,CAAd,EAAX;AACD,GATe;;AAWhB,EAAA,KAAK,EAAE,0BAAe,YAAW;AAC/B,WAAO,yBAAE,GAAF,CAAM,CAAE;AACb,IAAA,QAAQ,CAAC,IAAT,CAAc,WADH;AAEX,IAAA,QAAQ,CAAC,eAAT,CAAyB,WAFd;AAGX,IAAA,QAAQ,CAAC,IAAT,CAAc,WAHH;AAIX,IAAA,QAAQ,CAAC,eAAT,CAAyB,WAJd;AAKX,IAAA,QAAQ,CAAC,eAAT,CAAyB,WALd,CAAN;AAMF,oBAAO,YAAP,EANL;AAOD,GARM,CAXS;;AAqBhB,EAAA,MAAM,EAAE,0BAAe,YAAW;AAChC,WAAO,yBAAE,GAAF,CAAM,CAAE;AACb,IAAA,QAAQ,CAAC,IAAT,CAAc,YADH;AAEX,IAAA,QAAQ,CAAC,eAAT,CAAyB,YAFd;AAGX,IAAA,QAAQ,CAAC,IAAT,CAAc,YAHH;AAIX,IAAA,QAAQ,CAAC,eAAT,CAAyB,YAJd;AAKX,IAAA,QAAQ,CAAC,eAAT,CAAyB,YALd,CAAN;AAMF,oBAAO,YAAP,EANL;AAOD,GARO,CArBQ;;AA+BhB,EAAA,UAAU,EAAE,YAAW;AACrB,WAAO,yBAAE,SAAF,CAAY,aAAI,IAAJ,CAAS,UAArB,EAAiC,CAAjC,CAAP;AACD,GAjCe;;AAmChB,EAAA,MAAM,gBAnCU,EAAX,C","file":"page.js","sourcesContent":["import _ from 'lodash-firecloud';\nimport cfg from './cfg';\nimport client from './client';\nimport screen from './screen';\n\nimport {\n  roundRect,\n  shouldThrottle\n} from './util';\n\n// eslint-disable-next-line @typescript-eslint/explicit-function-return-type\nexport let toJSON = function() {\n  return roundRect({\n    cfg: page.cfg,\n\n    x: page.x(),\n    y: page.y(),\n    width: page.width(),\n    height: page.height(),\n\n    url: window.location.href,\n    zoomFactorPercentile: _.round(page.zoomFactor() * 100)\n  });\n};\n\n// page aka layout viewport, document\n// coordinates in device px relative to client\nexport let page = {\n  cfg: cfg.page,\n\n  x: function() {\n    return 0 - client.scroll.x();\n  },\n\n  y: function() {\n    return 0 - client.scroll.y();\n  },\n\n  width: shouldThrottle(function() {\n    return _.max([ // same as jQuery(document).width\n      document.body.scrollWidth,\n      document.documentElement.scrollWidth,\n      document.body.offsetWidth,\n      document.documentElement.offsetWidth,\n      document.documentElement.clientWidth\n    ]) * screen.osZoomFactor();\n  }),\n\n  height: shouldThrottle(function() {\n    return _.max([ // same as jQuery(document).height\n      document.body.scrollHeight,\n      document.documentElement.scrollHeight,\n      document.body.offsetHeight,\n      document.documentElement.offsetHeight,\n      document.documentElement.clientHeight\n    ]) * screen.osZoomFactor();\n  }),\n\n  zoomFactor: function() {\n    return _.defaultTo(cfg.page.zoomFactor, 1);\n  },\n\n  toJSON\n};\n\nexport default page;\n"]}