{"version":3,"sources":["../src/page.js"],"names":[],"mappings":"oIAAA;AACA;AACA;AACA;;AAEA,8B;;;;;AAKO,IAAI,MAAM,GAAG,YAAW;AAC7B,SAAO,qBAAU;AACf,IAAA,CAAC,EAAE,aAAK,CAAL,EADY;AAEf,IAAA,CAAC,EAAE,aAAK,CAAL,EAFY;AAGf,IAAA,KAAK,EAAE,aAAK,KAAL,EAHQ;AAIf,IAAA,MAAM,EAAE,aAAK,MAAL,EAJO;;AAMf,IAAA,oBAAoB,EAAE,yBAAE,KAAF,CAAQ,aAAK,UAAL,KAAoB,GAA5B,CANP,EAAV,CAAP;;AAQD,CATM;;AAWP;AACA;wBACO,IAAI,IAAI,GAAG;AAChB,EAAA,CAAC,EAAE,YAAW;AACZ,WAAO,gBAAO,CAAP,KAAa,gBAAO,MAAP,CAAc,CAAd,EAApB;AACD,GAHe;;AAKhB,EAAA,CAAC,EAAE,YAAW;AACZ,WAAO,gBAAO,CAAP,KAAa,gBAAO,MAAP,CAAc,CAAd,EAApB;AACD,GAPe;;AAShB,EAAA,KAAK,EAAE,0BAAe,YAAW;AAC/B,WAAO,yBAAE,GAAF,CAAM,CAAE;AACb,IAAA,QAAQ,CAAC,IAAT,CAAc,WADH;AAEX,IAAA,QAAQ,CAAC,eAAT,CAAyB,WAFd;AAGX,IAAA,QAAQ,CAAC,IAAT,CAAc,WAHH;AAIX,IAAA,QAAQ,CAAC,eAAT,CAAyB,WAJd;AAKX,IAAA,QAAQ,CAAC,eAAT,CAAyB,WALd,CAAN;AAMF,oBAAO,YAAP,EANL;AAOD,GARM,CATS;;AAmBhB,EAAA,MAAM,EAAE,0BAAe,YAAW;AAChC,WAAO,yBAAE,GAAF,CAAM,CAAE;AACb,IAAA,QAAQ,CAAC,IAAT,CAAc,YADH;AAEX,IAAA,QAAQ,CAAC,eAAT,CAAyB,YAFd;AAGX,IAAA,QAAQ,CAAC,IAAT,CAAc,YAHH;AAIX,IAAA,QAAQ,CAAC,eAAT,CAAyB,YAJd;AAKX,IAAA,QAAQ,CAAC,eAAT,CAAyB,YALd,CAAN;AAMF,oBAAO,YAAP,EANL;AAOD,GARO,CAnBQ;;AA6BhB,EAAA,UAAU,EAAE,YAAW;AACrB,WAAO,aAAI,IAAJ,CAAS,UAAhB;AACD,GA/Be;;AAiChB,EAAA,MAAM,gBAjCU,EAAX,C","file":"page.js","sourcesContent":["import _ from 'lodash-firecloud';\nimport cfg from './cfg';\nimport client from './client';\nimport screen from './screen';\n\nimport {\n  roundRect,\n  shouldThrottle\n} from './util';\n\nexport let toJSON = function() {\n  return roundRect({\n    x: page.x(),\n    y: page.y(),\n    width: page.width(),\n    height: page.height(),\n\n    zoomFactorPercentile: _.round(page.zoomFactor() * 100)\n  });\n};\n\n// page relative to window (top frame) | in device px\n// aka layout viewport, document\nexport let page = {\n  x: function() {\n    return client.x() - client.scroll.x();\n  },\n\n  y: function() {\n    return client.y() - client.scroll.y();\n  },\n\n  width: shouldThrottle(function() {\n    return _.max([ // same as jQuery(document).width\n      document.body.scrollWidth,\n      document.documentElement.scrollWidth,\n      document.body.offsetWidth,\n      document.documentElement.offsetWidth,\n      document.documentElement.clientWidth\n    ]) * screen.osZoomFactor();\n  }),\n\n  height: shouldThrottle(function() {\n    return _.max([ // same as jQuery(document).height\n      document.body.scrollHeight,\n      document.documentElement.scrollHeight,\n      document.body.offsetHeight,\n      document.documentElement.offsetHeight,\n      document.documentElement.clientHeight\n    ]) * screen.osZoomFactor();\n  }),\n\n  zoomFactor: function() {\n    return cfg.page.zoomFactor;\n  },\n\n  toJSON\n};\n\nexport default page;\n"]}